<section id="archive">
    {% for post in site.posts %}
    {% unless post.next %}
      <h2>{{ post.date | date: '%Y' }}</h2>
      <ul class="year-block" id="{{ post.date | date: '%Y' }}">
      {% else %}
        {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
        {% capture nyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
        
        {% if year != nyear %}
          </ul>
          <h2>{{ post.date | date: '%Y' }}</h2>
          <ul class="year-block" id="{{ post.date | date: '%Y' }}">
        {% endif %}
    {% endunless %}
    <li><time>{{ post.date | date:"%d %b" }} | </time><a href="{{ post.url }}">{{ post.title }}</a></li>
    {% endfor %}
  </ul>
</section>